<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productivity Valley</title>
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="icon" href="./assets/sun.ico" type="image/x-icon">
    <script src="./js/libs/phaser.js"></script>
</head>

<body>
    <script type="module" src="./js/game.js"></script>
    <div id="game-container"></div>
    <div class="menu-container task-menu" style="display: none;">
        <dialog class="menu task-menu" style="display: inline-flex; flex-direction: column;">
            <div class="menu-top-container">
                <button class="info-button" id="task-info-button">?</button>
                <p id="task-title">Create a task</p>
                <button class="exit-button" id="task-exit-button">X</button>
            </div>
            <div style="flex: 1; overflow: auto; display: flex; flex-direction: column; align-items: center;">
                <form id="task-form" style="display: flex; justify-content: center;">
                    <table id="task-menu-table">
                        <tr class = "uneditable">
                            <td>
                                <label for="preset">Preset:</label>
                                <select id="preset" name="preset">
                                    <option value="new"></option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="taskName">Task Name:</label>
                                <input type="text" id="taskName" class="editable" name="taskName" maxlength="25" value="Task" required><br>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="repetitions">Sessions:</label>
                                <input type="number" id="repetitions" class="editable" name="repetitions" style="width: 70px" min="1" max="20" step="1" value="1" required>
                            </td>
                        </tr>
                        <tr class = "uneditable">
                            <td>
                                <label for="cropChoice">Crop:</label>
                                <select id="cropChoice" name="cropChoice">
                                    <option value="sunflower">Sunflower</option>
                                    <option value="carrot">Carrot</option>
                                    <option value="pumpkin">Pumpkin</option>
                                    <option value="tulip">Tulip</option>
                                    <option value="tomato">Tomato</option>
                                </select><br>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="checkbox" id="subtasks-query" class="editable" name="subtasksQuery">
                                <label for="subtasks-query">Add Subtasks</label>
                            </td>
                        </tr>
                        <tr class="subtask-row" style="display: none;">
                            <td>
                                <label for="subtask0">- </label>
                                <input type="text" id="subtask0" class="subtask editable" name="subtask" maxlength="64" ></input>
                            </td>
                        </tr>
                        <tr id="save-preset-row" class = "uneditable">
                            <td>
                                <input type="checkbox" id="save-preset" name="savePreset">
                                <label for="save-preset">Save Preset</label>
                            </td>
                        </tr>


                        <tr>
                            <td>
                                <div style="display: flex; justify-content: center;">
                                    <button type="button" id = "harvest-task" style="display: none; background-color: red;">Harvest</button>
                                    <button type="submit" id = "create-task">Create</button>
                                </div>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
        </dialog>
    </div>



    <div class="menu-container shop-menu" style="display: none;">
        <dialog class="menu shop-menu" style="display: flex; flex-direction: column;">
            <div class="menu-top-container">
                <button type="button" class="menu-top-spacer">X</button>
                <h1>Crop Shop</h1>
                <button type="button" class="exit-button" id="shop-exit-button">X</button>
            </div>
            <div style="flex: 1; overflow: auto; display: flex; flex-direction: column; align-items: center;">
                <table class="menu-table" id="seed-menu" style="display: none;">
                    <tr class="menu-row" id="sunflower">
                        <tc>
                            <td>
                                <img class="seed-bags" id="sunflower-bag" src="/assets/seed-bags/sunflower-seeds-4x.png">
                            </td>
                        </tc>
                        <tc>
                            <td>
                                <button id="sunflower-button" class="sunflower"><span class="sunflower">50</span><span class="coin sunflower"><img class="sunflower"
                                        src="../assets/coin-medium.png" alt="coins" style="width: 3vw; height: 3vw"></span></button><br>
                                
                            </td>
                        </tc>
                    </tr>
                    <tr class="menu-row" id="carrot">
                        <tc>
                            <td>
                                <img class="seed-bags" id="carrot-bag" src="/assets/seed-bags/carrot-seeds-4x.png">
                            </td>
                        </tc>
                        <tc>
                            <td>
                                <button id="carrot-button" class="carrot"><span class="carrot">50</span><span class="coin carrot"><img class="carrot"
                                        src="../assets/coin-medium.png" alt="coins" style="width: 3vw; height: 3vw"></span></button><br>
                                
                            </td>
                        </tc>
                    </tr>
                    <tr class="menu-row" id="pumpkin">
                        <tc>
                            <td>
                                <img class="seed-bags" id="pumpkin-bag" src="/assets/seed-bags/pumpkin-seeds-4x.png">
                            </td>
                        </tc>
                        <tc>
                            <td>
                                <button id="pumpkin-button" class="pumpkin"><span class="pumpkin">50</span><span class="coin pumpkin"><img class="pumpkin"
                                        src="../assets/coin-medium.png" alt="coins" style="width: 3vw; height: 3vw"></span></button><br>
                                
                            </td>
                        </tc>
                    </tr>
                    <tr class="menu-row" id="tulip">
                        <tc>
                            <td>
                                <img class="seed-bags" id="tulip-bag" src="/assets/seed-bags/pumpkin-seeds-4x.png">
                            </td>
                        </tc>
                        <tc>
                            <td>
                                <button id="tulip-button" class="tulip"><span class="tulip">50</span><span class="coin tulip"><img class="tulip"
                                        src="../assets/coin-medium.png" alt="coins" style="width: 3vw; height: 3vw"></span></button><br>
                                
                            </td>
                        </tc>
                    </tr>
                    <tr class="menu-row" id="tomato" style = "display:none">
                        <tc>
                            <td>
                                <img class="seed-bags" id="tomato-bag" src="/assets/seed-bags/pumpkin-seeds-4x.png">
                            </td>
                        </tc>
                        <tc>
                            <td>
                                <button id="tomato-button" class="tomato"><span class="tomato">50</span><span class="coin tomato"><img class="tomato"
                                        src="../assets/coin-medium.png" alt="coins" style="width: 3vw; height: 3vw"></span></button><br>
                                
                            </td>
                        </tc>
                    </tr>

                </table>
            </div>
        </dialog>
    </div>

    <div class="menu-container decoration-plot-menu" style="display: none;">
        <dialog class="menu decoration-plot-menu" style="display: flex; flex-direction: column;">
            <div class="menu-top-container">
                <button type="button" class="menu-top-spacer">X</button>
                <p>Decorations</p>
                <button type="button" class="exit-button" id="decoration-plot-exit-button">X</button>
            </div>
            <div id="decoration-container"
                style="flex: 1; overflow: auto; display: flex; justify-content: space-around; flex-wrap: wrap;">
                <!-- Decorations dynamically added here -->
            </div>
            <div class="menu-top-container">
                <button type="button" class="menu-top-spacer">X</button>
                <p>Plots</p>
                <button type="button" class="menu-top-spacer">X</button>
            </div>
            <div id="plot-container"
                style="flex: 1; overflow: auto; display: flex; justify-content: space-around; flex-wrap: wrap;">
                <!-- Plots dynamically added here -->
            </div>
        </dialog>
    </div>

    <div class="menu-container furniture-menu" style="display: none;">
        <dialog class="menu furniture-menu" style="display: flex; flex-direction: column;">
            <div class="menu-top-container">
                <button type="button" class="menu-top-spacer">X</button>
                <p>Furniture</p>
                <button type="button" class="exit-button" id="furniture-exit-button">X</button>
            </div>
            <div id="furniture-container"
                style="flex: 1; overflow: auto; display: flex; justify-content: space-around; flex-wrap: wrap;">
                <!-- Furniture dynamically added here -->
            </div>
        </dialog>
    </div>

    <div class="menu-container furniture-shop-menu" style="display: none;">
        <dialog class="menu furniture-shop-menu" style="display: flex; flex-direction: column;">
            <div class="menu-top-container">
                <button type="button" class="menu-top-spacer">X</button>
                <p>Furniture Shop</p>
                <button type="button" class="exit-button" id="furniture-shop-exit-button">X</button>
            </div>
            <div id="furniture-shop-container"
                style="flex: 1; overflow: auto; display: flex; justify-content: space-around; flex-wrap: wrap;">
                <!-- Furniture dynamically added here -->
            </div>
        </dialog>
    </div>

    <div class="menu-container decoration-shop-menu" style="display: none;">
        <dialog class="menu decoration-shop-menu" style="display: flex; flex-direction: column;">
            <div class="menu-top-container">
                <button type="button" class="menu-top-spacer">X</button>
                <p>Decoration Shop</p>
                <button type="button" class="exit-button" id="decoration-shop-exit-button">X</button>
            </div>
            <div id="decoration-shop-container"
                style="flex: 1; overflow: auto; display: flex; justify-content: space-around; flex-wrap: wrap;">
                <!-- Decorations dynamically added here -->
            </div>
        </dialog>
    </div>

    <div class="menu-container plots-shop-menu" style="display: none;">
        <dialog class="menu plots-shop-menu" style="display: flex; flex-direction: column;">
            <div class="menu-top-container">
                <button type="button" class="menu-top-spacer">X</button>
                <p>Plot Shop</p>
                <button type="button" class="exit-button" id="plots-shop-exit-button">X</button>
            </div>
            <div id="plots-shop-container"
                style="flex: 1; overflow: auto; display: flex; justify-content: space-around; flex-wrap: wrap;">
                <!-- Plots dynamically added here -->
            </div>
        </dialog>
    </div>

    <div id="edit-buttons-container">
        <button class="edit" id="edit-button"><img src="./assets/edit/edit.png" alt="Edit icon"></button>
        <button class="edit" id="tick-button" style="display: none;"><img src="./assets/edit/tick.png"
                alt="Tick icon"></button>
        <button class="edit" id="plus-button" style="display: none;"><img src="./assets/edit/plus.png"
                alt="Plus icon"></button>
        <button class="edit" id="trash-button" style="display: none;"><img src="./assets/edit/trash.png"
                alt="Cross icon"></button>
        <button class="edit" id="cross-button" style="display: none;"><img src="./assets/edit/cross.png"
                alt="Cross icon"></button>
    </div>

    <!--Settings Popup-->
    <div class="menu-container settings-menu" style="display: none;">
        <dialog class="menu settings-menu" style="display: inline-flex; flex-direction: column;">
            <div class="menu-top-container">
                <button class="info-button" id="settings-info-button">?</button>
                <p>Settings</p>
                <button class="exit-button" id="settings-exit-button">X</button>
            </div>
            <div style="flex: 1; overflow: auto; display: flex; flex-direction: column; align-items: center;">
                <form id="settings-form" style="display: flex; justify-content: center;">
                    <table id="settings-menu-table">
                        <tr>
                            <td>
                                <label for="workTime">Pomodoro:</label>
                                <input type="number" id="workTime" name="workTime" min="10" max="120" step="1"
                                    value="25" style="width: 70px" required>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="shortBreakTime">Short Break:</label>
                                <input type="number" id="shortBreakTime" name="shortBreak" min="1" max="120" step="1"
                                    value="5" style="width: 70px" required>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="longBreakTime">Long Break:</label>
                                <input type="number" id="longBreakTime" name="longBreak" min="1" max="120" step="1"
                                    value="15" style="width: 70px" required>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="longBreakInterval">Long Break Interval:</label>
                                <input type="number" id="longBreakInterval" name="longBreakInterval" min="2" max="20"
                                    step="1" value="4" style="width: 70px" 000000required>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="checkbox" id="autoStartPomodoro" name="autoStartPomodoro">
                                <label for="autoStartPomodoro">Auto Start Pomodoro</label>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="checkbox" id="autoStartBreak" name="autoStartBreak">
                                <label for="autoStartBreak">Auto Start Break</label>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="checkbox" id="autoHideTime" name="autoHideTime">
                                <label for="autoHideTime">Auto Hide Time when Starting Pomodoro</label>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="fontStyle">Font Style:</label>
                                <select id="fontStyle" name="fontStyle">
                                    <option value="pixelArt">Pixel (Default)</option>
                                    <option value="standard">Standard</option>
                                    <option value="dyslexic">Dyslexic</option>
                                </select><br>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="fontSize">Font Size:</label>
                                <select id="fontSize" name="fontSize">
                                    <option value="small">Small</option>
                                    <option value="medium">Medium (Default)</option>
                                    <option value="large">Large</option>
                                </select><br>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div style="display: flex; justify-content: center;">
                                    <button type="submit">Save</button>
                                </div>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
        </dialog>
    </div>

    <!--Coins-->
    <div class="coins-container">
        <p id="current-coins-value" style="font-size: 30px;">1000</p>
        <img src="assets/coin-large.png" alt="coins">
    </div>

    <!--Top left-->
    <div class="top-left-container">
        <div id="home-icon-container">
            <img src="/assets/home.png" alt="Home Icon">
        </div>
        <div id="settings-icon-container">
            <img src="/assets/settings.png" alt="Settings Icon">
        </div>
        <div id="soundToggle" onclick="toggleSound()">
            <img src="assets/audio/sound-on.png" alt="Sound On" id="soundOnIcon">
            <img src="assets/audio/sound-off.png" alt="Sound Off" id="soundOffIcon" style="display: none">
        </div>
    </div>

    <!--attribution to flaticon-->
    <!--<a href="https://www.flaticon.com/free-icons/silence" title="silence icons">Silence icons created by Angelo Troiano - Flaticon</a>-->

    <!--Audio for clock-->
    <audio id="alarm-long">
        <source src="assets/audio/alarm-clock.mp3" type="audio/mpeg">
    </audio>
    <audio id="alarm-short">
        <source src="assets/audio/alarm-clock-short.mp3" type="audio/mpeg">
    </audio>

    <script>
        // var sound = document.getElementById("alarm-short");
        soundMuted = false;
        var soundOnIcon = document.getElementById("soundOnIcon");
        var soundOffIcon = document.getElementById("soundOffIcon");

        function toggleSound() {
            if (soundMuted) {
                soundMuted = false;
                soundOnIcon.style.display = "inline";
                soundOffIcon.style.display = "none";

            } else {
                soundMuted = true;
                soundOnIcon.style.display = "none";
                soundOffIcon.style.display = "inline";
            }
        }
    </script>

    <!--Home Menu Popup-->
    <div class="menu-container home-menu" style="display: none; margin-top: 100px; margin-bottom: 100px;">
        <dialog class="menu home-menu" style="display: inline-flex; flex-direction: column; height: 450px;">
            <div class="menu-top-container" style="align-self: flex-end;">
                <button class="exit-button" id="home-exit-button">X</button>
            </div>
            <div style="justify-content: center; display: flex;">
                <table id="home-menu-table">
                    <tr>
                        <td>
                            <!--Show tutorial cards-->
                            <div style="display: flex; justify-content: center;">
                                <button id="quick-guide">Quick Guide</button>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div style="display: flex; justify-content: center;">
                                <button id="exit-game">Save and Exit Game</button>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <!--Should delete account from the database-->
                        <td>
                            <div style="display: flex; justify-content: center;">
                                <button id="delete-account">Delete Account</button>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </dialog>
    </div>

    <!--Confirmation Popup Screen-->
    <div class="menu-container confirmation" style="display: none;">
        <dialog class="menu confirmation" style="display: flex; flex-direction: column; height: 35vh;">
            <div id="confirmation-container" style="flex: 1; overflow: auto; display: flex; justify-content: center; flex-wrap: wrap;">
                <p id="confirmation-message" style="float:none; text-align: center"></p>
                <br>
                <p id="confirmation-note" style="font-size: 2vw; float:none; text-align: center"></p>
                <br>
                <div id="confirmation-buttons-container" style="clear:both">
                    <button type="button" id = "accept-confirmation">Yes</button>
                    <button type="button" id="deny-confirmation">No</button>
                </div>
            </div>
        </dialog>
    </div>

    <div class="menu-container alertWindow" style="display: none;">
        <dialog class="menu alertWindow" style="display: flex; flex-direction: column; height: 35vh;">
            <div id="alertWindow-container" style="flex: 1; overflow: auto; display: flex; justify-content: center; flex-wrap: wrap;">
                <p id="alertWindow-message" style="float:none; text-align: center;"></p>
                <p id="alertWindow-note" style="float:none; text-align: center;"></p>
                <div style = "flex-basis: 100%; height: 0;"></div>
                <div id="alertWindow-buttons-container" style="clear:both">
                    <button type="button" id="okButton">OK</button>
                </div>
            </div>
        </dialog>
    </div>

</body>

</html>